(()=>{function t(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=t[e];return n}jQuery(document).ready((function(a){jQuery(document).on("ninja_table_loaded",(function(e,n,r){if("wp_woo"==r.provider){var i=this,o={};n.on("change",".nt_woo_attribute",(function(e){var r=a(this);o={};var c=r.data("product_id"),u=n.find(".nt_add_to_cart_"+c).attr("data-product_variations"),_=JSON.parse(u),l=(r.data("attribute_name"),r.val()),s=[],p=[];if(a(".ntb_attribute_select_"+c).each((function(t,e){_.map((function(t,n){var r=a(e).data("attribute_name"),i=a(e).val();t.attributes[r]===i&&""===l?s.push(d(t)):""===t.attributes[r]?(t.attributes[r]=i,s.push(d(t))):t.attributes[r]===i&&s.push(d(t))}))})),a(".ntb_attribute_select_"+c).each((function(e,n){var r=[],i=a(n).data("attribute_name"),o=a(n).data("attribute_label"),d=a(n).val(),c=a(n).data("default_options");if(s.length>0){var u=t(new Set(s.map((function(t){return t.attributes[i]})).filter((function(t){return""!==t}))));r=u.length>0?u:c}else r=c;var _=a(n);_.empty(),_.append('<option value="">'+o+"</option>"),r.map((function(t,a){_.append('<option value="'+t+'">'+t+"</option>")})),r.includes(d)&&d.length>0&&(_.val(d),p.push(d))})),s.length>0&&s.map((function(t,a){var e=Object.values(t.attributes);JSON.stringify(e)!==JSON.stringify(p)||(i.selectedVariation=t)})),a(".ntb_attribute_select_"+c).length===p.length){var f=i.selectedVariation.price_html;a(".selected_price_"+c).html(f),a(".nt_add_to_cart_"+c).css("opacity","1")}else a(".selected_price_"+c).html(""),a(".nt_add_to_cart_"+c).css("opacity","0.5"),i.selectedVariation={}})),n.on("change",".nt_woo_quantity",(function(t){var e=a(this),r=e.data("product_id");n.find(".nt_add_to_cart_"+r).attr("data-quantity",e.val())})),n.on("click",".single_add_to_cart_button",(function(t){t.preventDefault();var e=a(this),d=e.attr("data-product_id"),c=e.attr("data-product_type");if("variable"===c&&void 0===(i.selectedVariation&&i.selectedVariation.variation_id))return alert("Please select some product options before adding this product to your cart."),!1;o.product_id=d,o.quantity=e.attr("data-quantity"),o.product_type=c,o.variation_id=i.selectedVariation&&i.selectedVariation.variation_id,o.attributes=i.selectedVariation&&i.selectedVariation.attributes,o.ninja_table=r.table_id,o.action="ninja_table_wp_woo_add_to_cart",e.parent().addClass("nt_added_cart");var u=e.html();e.append('<span class="fooicon fooicon-loader"></span>'),a.post(window.ninja_footables.ajax_url,o).then((function(t){a(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,e]),n.find("a.added_to_cart.wc-forward").html(""),a("#nt_product_qty_"+d).val(1),a("#nt_product_qty_"+d).trigger("change")})).fail((function(t){})).always((function(){e.html(u)}))}))}function d(t){var a={};return a.variation_id=t.variation_id,a.attributes=t.attributes,a.price_html=t.price_html,a}}))}))})();